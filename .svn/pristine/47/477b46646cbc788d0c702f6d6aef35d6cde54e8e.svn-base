package com.FDV.hitra1ka.Adapters;

import android.app.Activity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.SimpleAdapter;
import android.widget.TextView;

import com.FDV.hitra1ka.R;

import java.util.HashMap;
import java.util.List;

import static com.FDV.hitra1ka.R.id.active;

public class VprasalnikiSimpleAdapter extends SimpleAdapter {

    //private Activity ctx;
    //private boolean mobile_created_list;

    public VprasalnikiSimpleAdapter(Activity context, List<HashMap<String, String>> items,
                                    int resource, String[] from, int[] to, boolean mobile_created_list1) {
        super(context, items, resource, from, to);
        //ctx = context;
        //mobile_created_list = mobile_created_list1;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = super.getView(position, convertView, parent);

        TextView aktiviran = (TextView) rowView.findViewById(active);
        View aktiv = rowView.findViewById(R.id.vprAktiv);

        TextView mobile = (TextView) rowView.findViewById(R.id.mobile);
        String mobile_created = (mobile.getText().toString());
        TextView oznaka = (TextView) rowView.findViewById(R.id.litem_spodaj_levo_mobile);

        if(mobile_created.equals("1") /*&& !mobile_created_list*/){
            /*TextView naslov = (TextView) rowView.findViewById(R.id.litem_zgoraj);
            //odd presledka - prv se bo zamenjal z sliko, drugi pa je, da se v redkih primerih
            // ne podre izgled - ce das recimo same WWWW... za ime, se nepravilno postavi slika
            String snaslov = (naslov.getText().toString()+"  ");

            //dobi slikico da je mobile in nastavi velikost
            Drawable d = ContextCompat.getDrawable(ctx, R.drawable.mobile_created);
            d.setBounds(0, 0, d.getIntrinsicHeight(), d.getIntrinsicHeight());

            CustomImageSpan imageSpan = new CustomImageSpan(d);
            final SpannableString spannableString = new SpannableString(snaslov);
            //zamenjaj predzadnji char-presledek
            spannableString.setSpan(imageSpan, snaslov.length()-2, snaslov.length()-1, SpannableString.SPAN_EXCLUSIVE_EXCLUSIVE);
            naslov.setText(spannableString);*/

            oznaka.setVisibility(View.VISIBLE);
        }
        else
            oznaka.setVisibility(View.GONE);

        String stanje = (aktiviran.getText().toString());

        //deaktiviran
        if (stanje.equals("0")) {
            aktiv.setBackgroundResource(R.drawable.list_item_circle_deactive);
        }
        //se ni bil aktiviran
        else if (stanje.equals("-1")) {
            aktiv.setBackgroundResource(R.drawable.list_item_circle_unactive);
        }
        //ostali so aktivirani (active = 1)
        else {
            aktiv.setBackgroundResource(R.drawable.list_item_circle_active);
        }

        return rowView;
    }
}
